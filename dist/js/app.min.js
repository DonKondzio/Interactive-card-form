"use strict";var nameInput=document.querySelector(".input-name"),numberInput=document.querySelector(".input-number"),monthInput=document.querySelector(".input-month"),yearInput=document.querySelector(".input-year"),cvcInput=document.querySelector(".input-cvc"),allInputs=document.querySelectorAll(".input"),nameSpan=document.querySelector(".span-name"),numberSpan=document.querySelector(".span-number"),dateSpan=document.querySelector(".span-date"),cvcSpan=document.querySelector(".span-cvc"),numberDisplay=document.querySelector(".card-code-number"),nameDisplay=document.querySelector(".name"),monthDisplay=document.querySelector(".month"),yearDisplay=document.querySelector(".year"),cvcDisplay=document.querySelector(".cvc"),form=document.querySelector(".form"),completeContainer=document.querySelector(".complete"),formBtn=document.querySelector(".form-btn"),validationState=0,displayEmptyInfo=function(e){e.textContent="Can't be blank"},showError=function(e,n){e.classList.add("active"),n.classList.add("error")},removeError=function(e,n){e.classList.remove("active"),n.classList.remove("error")},checkName=function(){removeError(nameSpan,nameInput);var e=nameInput.value;e?/^[a-zA-Z]+ [a-zA-Z]+$/.test(e)?validationState++:(showError(nameSpan,nameInput),nameSpan.textContent="Required full name (first and last name)"):(showError(nameSpan,nameInput),displayEmptyInfo(nameSpan))},checkCodeNum=function(){removeError(numberSpan,numberInput);var e=numberInput.value;e?e.length<19?(showError(numberSpan,numberInput),numberSpan.textContent="Entered code is too short"):/^\d{4}\s\d{4}\s\d{4}\s\d{4}$/.test(e)?validationState++:(showError(numberSpan,numberInput),numberSpan.textContent="Wrong format, numbers only"):(showError(numberSpan,numberInput),displayEmptyInfo(numberSpan))},checkMonthAndYear=function(){removeError(dateSpan,monthInput),removeError(dateSpan,yearInput);var e=monthInput.value,n=yearInput.value;e||(showError(dateSpan,monthInput),displayEmptyInfo(dateSpan)),n||(showError(dateSpan,yearInput),displayEmptyInfo(dateSpan)),e&&n&&validationState++},checkCvc=function(){removeError(cvcSpan,cvcInput),cvcInput.value?validationState++:(showError(cvcSpan,cvcInput),displayEmptyInfo(cvcSpan))},showComplete=function(){form.classList.remove("active"),completeContainer.classList.add("active")},forceTwoDigits=function(e){1===e.target.value.length&&(e.target.value=e.target.value.padStart(2,"0"))},forceThreeDigits=function(e){e.target.value.length<3&&(e.target.value=e.target.value.padStart(3,"0"))},forceProperValue=function(e){+e.target.value>e.target.max?e.target.value=e.target.max:+e.target.value<e.target.min&&(e.target.value=e.target.min)},checkForm=function(e){e.preventDefault(),checkName(),checkCodeNum(),checkMonthAndYear(),checkCvc(),4===validationState?showComplete():validationState=0},displayInfo=function(e,n,t){n.textContent=e.value,""===e.value&&(n.textContent=t)};nameInput.addEventListener("input",function(){displayInfo(nameInput,nameDisplay)}),numberInput.addEventListener("input",function(){numberInput.value=numberInput.value.replace(/\s/g,"").replace(/(.{4})(?!$)/g,"$1 "),displayInfo(numberInput,numberDisplay,"0000 0000 0000 0000")}),monthInput.addEventListener("change",forceTwoDigits),monthInput.addEventListener("change",forceProperValue),monthInput.addEventListener("change",function(){displayInfo(monthInput,monthDisplay,"00")}),yearInput.addEventListener("change",forceTwoDigits),yearInput.addEventListener("change",forceProperValue),yearInput.addEventListener("change",function(){displayInfo(yearInput,yearDisplay,"00")}),cvcInput.addEventListener("change",forceThreeDigits),cvcInput.addEventListener("change",forceProperValue),cvcInput.addEventListener("change",function(){displayInfo(cvcInput,cvcDisplay,"000")}),formBtn.addEventListener("click",checkForm);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJuYW1lSW5wdXQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJudW1iZXJJbnB1dCIsIm1vbnRoSW5wdXQiLCJ5ZWFySW5wdXQiLCJhbGxJbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmFtZVNwYW4iLCJudW1iZXJTcGFuIiwiZGF0ZVNwYW4iLCJudW1iZXJEaXNwbGF5IiwibmFtZURpc3BsYXkiLCJtb250aERpc3BsYXkiLCJ5ZWFyRGlzcGxheSIsImN2Y0Rpc3BsYXkiLCJjb21wbGV0ZUNvbnRhaW5lciIsImZvcm1CdG4iLCJ2YWxpZGF0aW9uU3RhdGUiLCJzcGFuIiwic2hvd0Vycm9yIiwiY2xhc3NMaXN0IiwicmVtb3ZlRXJyb3IiLCJpbnB1dCIsInJlbW92ZSIsIm5hbWVSZWdleCIsIm5hbWUiLCJ2YWx1ZSIsImRpc3BsYXlFbXB0eUluZm8iLCJ0ZXN0IiwidGV4dENvbnRlbnQiLCJjaGVja0NvZGVOdW0iLCJudW1SZWdleCIsIm51bSIsImxlbmd0aCIsImNoZWNrTW9udGhBbmRZZWFyIiwieWVhciIsImNoZWNrQ3ZjIiwiY3ZjU3BhbiIsImN2Y0lucHV0Iiwic2hvd0NvbXBsZXRlIiwiZm9ybSIsImUiLCJ0YXJnZXQiLCJmb3JjZVByb3BlclZhbHVlIiwiYWRkIiwiY2hlY2tOYW1lIiwicGFkU3RhcnQiLCJkaXNwbGF5SW5mbyIsImRpc3BsYXlFbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJtYXgiLCJtaW4iLCJmb3JjZVRocmVlRGlnaXRzIiwicmVwbGFjZSIsImZvcmNlVHdvRGlnaXRzIiwiY2hlY2tGb3JtIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFNQSxVQUFZQyxTQUFTQyxjQUFjLGFBQWEsRUFDaERDLFlBQWNGLFNBQVNDLGNBQWMsZUFBZSxFQURwREYsV0FBWUMsU0FBU0MsY0FBYyxjQUFjLEVBQ2pEQyxVQUFjRixTQUFTQyxjQUFjLGFBQUEsRUFDckNFLFNBQWFILFNBQVNDLGNBQWMsWUFBQSxFQUNw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QUFVRyxnQkFBZ0IsRUFDcERkLFNBQVNXLGlCQUFpQixTQUFVTixnQkFBZ0IsRUFDcERMLFNBQVNXLGlCQUFpQixTQUFVLFdBQ2xDRixZQUFZVCxTQUFVeEIsV0FBWSxLQUFLLENBQ3pDLENBQUMsRUFFREUsUUFBUWlDLGlCQUFpQixRQUFTTSxTQUFTIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmlucHV0LW5hbWVcIik7XHJcbmNvbnN0IG51bWJlcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbnB1dC1udW1iZXJcIik7XHJcbmNvbnN0IG1vbnRoSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmlucHV0LW1vbnRoXCIpO1xyXG5jb25zdCB5ZWFySW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmlucHV0LXllYXJcIik7XHJcbmNvbnN0IGN2Y0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbnB1dC1jdmNcIik7XHJcbmNvbnN0IGFsbElucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaW5wdXRcIik7XHJcblxyXG5jb25zdCBuYW1lU3BhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3Bhbi1uYW1lXCIpO1xyXG5jb25zdCBudW1iZXJTcGFuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zcGFuLW51bWJlclwiKTtcclxuY29uc3QgZGF0ZVNwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNwYW4tZGF0ZVwiKTtcclxuY29uc3QgY3ZjU3BhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3Bhbi1jdmNcIik7XHJcblxyXG5jb25zdCBudW1iZXJEaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkLWNvZGUtbnVtYmVyXCIpO1xyXG5jb25zdCBuYW1lRGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmFtZVwiKTtcclxuY29uc3QgbW9udGhEaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb250aFwiKTtcclxuY29uc3QgeWVhckRpc3BsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnllYXJcIik7XHJcbmNvbnN0IGN2Y0Rpc3BsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmN2Y1wiKTtcclxuXHJcbmNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbmNvbnN0IGNvbXBsZXRlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb21wbGV0ZVwiKTtcclxuY29uc3QgZm9ybUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1idG5cIik7XHJcblxyXG5sZXQgdmFsaWRhdGlvblN0YXRlID0gMDtcclxuXHJcbmNvbnN0IGRpc3BsYXlFbXB0eUluZm8gPSAoc3BhbikgPT4ge1xyXG4gIHNwYW4udGV4dENvbnRlbnQgPSBcIkNhbid0IGJlIGJsYW5rXCI7XHJcbn07XHJcblxyXG5jb25zdCBzaG93RXJyb3IgPSAoc3BhbiwgaW5wdXQpID0+IHtcclxuICBzcGFuLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgaW5wdXQuY2xhc3NMaXN0LmFkZChcImVycm9yXCIpO1xyXG59O1xyXG5cclxuY29uc3QgcmVtb3ZlRXJyb3IgPSAoc3BhbiwgaW5wdXQpID0+IHtcclxuICBzcGFuLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImVycm9yXCIpO1xyXG59O1xyXG5cclxuY29uc3QgY2hlY2tOYW1lID0gKCkgPT4ge1xyXG4gIHJlbW92ZUVycm9yKG5hbWVTcGFuLCBuYW1lSW5wdXQpO1xyXG4gIGNvbnN0IG5hbWVSZWdleCA9IC9eW2EtekEtWl0rIFthLXpBLVpdKyQvO1xyXG4gIGNvbnN0IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7XHJcblxyXG4gIGlmICghbmFtZSkge1xyXG4gICAgc2hvd0Vycm9yKG5hbWVTcGFuLCBuYW1lSW5wdXQpO1xyXG4gICAgZGlzcGxheUVtcHR5SW5mbyhuYW1lU3Bhbik7XHJcbiAgfSBlbHNlIGlmICghbmFtZVJlZ2V4LnRlc3QobmFtZSkpIHtcclxuICAgIHNob3dFcnJvcihuYW1lU3BhbiwgbmFtZUlucHV0KTtcclxuICAgIG5hbWVTcGFuLnRleHRDb250ZW50ID0gXCJSZXF1aXJlZCBmdWxsIG5hbWUgKGZpcnN0IGFuZCBsYXN0IG5hbWUpXCI7XHJcbiAgfSBlbHNlIHtcclxuICAgIHZhbGlkYXRpb25TdGF0ZSsrO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGNoZWNrQ29kZU51bSA9ICgpID0+IHtcclxuICByZW1vdmVFcnJvcihudW1iZXJTcGFuLCBudW1iZXJJbnB1dCk7XHJcbiAgY29uc3QgbnVtUmVnZXggPSAvXlxcZHs0fVxcc1xcZHs0fVxcc1xcZHs0fVxcc1xcZHs0fSQvO1xyXG4gIGNvbnN0IG51bSA9IG51bWJlcklucHV0LnZhbHVlO1xyXG5cclxuICBpZiAoIW51bSkge1xyXG4gICAgc2hvd0Vycm9yKG51bWJlclNwYW4sIG51bWJlcklucHV0KTtcclxuICAgIGRpc3BsYXlFbXB0eUluZm8obnVtYmVyU3Bhbik7XHJcbiAgfSBlbHNlIGlmIChudW0ubGVuZ3RoIDwgMTkpIHtcclxuICAgIHNob3dFcnJvcihudW1iZXJTcGFuLCBudW1iZXJJbnB1dCk7XHJcbiAgICBudW1iZXJTcGFuLnRleHRDb250ZW50ID0gXCJFbnRlcmVkIGNvZGUgaXMgdG9vIHNob3J0XCI7XHJcbiAgfSBlbHNlIGlmICghbnVtUmVnZXgudGVzdChudW0pKSB7XHJcbiAgICBzaG93RXJyb3IobnVtYmVyU3BhbiwgbnVtYmVySW5wdXQpO1xyXG4gICAgbnVtYmVyU3Bhbi50ZXh0Q29udGVudCA9IFwiV3JvbmcgZm9ybWF0LCBudW1iZXJzIG9ubHlcIjtcclxuICB9IGVsc2Uge1xyXG4gICAgdmFsaWRhdGlvblN0YXRlKys7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgY2hlY2tNb250aEFuZFllYXIgPSAoKSA9PiB7XHJcbiAgcmVtb3ZlRXJyb3IoZGF0ZVNwYW4sIG1vbnRoSW5wdXQpO1xyXG4gIHJlbW92ZUVycm9yKGRhdGVTcGFuLCB5ZWFySW5wdXQpO1xyXG5cclxuICBjb25zdCBtb250aCA9IG1vbnRoSW5wdXQudmFsdWU7XHJcbiAgY29uc3QgeWVhciA9IHllYXJJbnB1dC52YWx1ZTtcclxuXHJcbiAgaWYgKCFtb250aCkge1xyXG4gICAgc2hvd0Vycm9yKGRhdGVTcGFuLCBtb250aElucHV0KTtcclxuICAgIGRpc3BsYXlFbXB0eUluZm8oZGF0ZVNwYW4pO1xyXG4gIH1cclxuXHJcbiAgaWYgKCF5ZWFyKSB7XHJcbiAgICBzaG93RXJyb3IoZGF0ZVNwYW4sIHllYXJJbnB1dCk7XHJcbiAgICBkaXNwbGF5RW1wdHlJbmZvKGRhdGVTcGFuKTtcclxuICB9XHJcblxyXG4gIGlmIChtb250aCAmJiB5ZWFyKSB7XHJcbiAgICB2YWxpZGF0aW9uU3RhdGUrKztcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBjaGVja0N2YyA9ICgpID0+IHtcclxuICByZW1vdmVFcnJvcihjdmNTcGFuLCBjdmNJbnB1dCk7XHJcblxyXG4gIGNvbnN0IGN2YyA9IGN2Y0lucHV0LnZhbHVlO1xyXG5cclxuICBpZiAoIWN2Yykge1xyXG4gICAgc2hvd0Vycm9yKGN2Y1NwYW4sIGN2Y0lucHV0KTtcclxuICAgIGRpc3BsYXlFbXB0eUluZm8oY3ZjU3Bhbik7XHJcbiAgfSBlbHNlIHtcclxuICAgIHZhbGlkYXRpb25TdGF0ZSsrO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHNob3dDb21wbGV0ZSA9ICgpID0+IHtcclxuICBmb3JtLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgY29tcGxldGVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxufTtcclxuXHJcbmNvbnN0IGZvcmNlVHdvRGlnaXRzID0gKGUpID0+IHtcclxuICBpZiAoZS50YXJnZXQudmFsdWUubGVuZ3RoID09PSAxKSB7XHJcbiAgICBlLnRhcmdldC52YWx1ZSA9IGUudGFyZ2V0LnZhbHVlLnBhZFN0YXJ0KDIsIFwiMFwiKTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBmb3JjZVRocmVlRGlnaXRzID0gKGUpID0+IHtcclxuICBpZiAoZS50YXJnZXQudmFsdWUubGVuZ3RoIDwgMykge1xyXG4gICAgZS50YXJnZXQudmFsdWUgPSBlLnRhcmdldC52YWx1ZS5wYWRTdGFydCgzLCBcIjBcIik7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgZm9yY2VQcm9wZXJWYWx1ZSA9IChlKSA9PiB7XHJcbiAgaWYgKCtlLnRhcmdldC52YWx1ZSA+IGUudGFyZ2V0Lm1heCkge1xyXG4gICAgZS50YXJnZXQudmFsdWUgPSBlLnRhcmdldC5tYXg7XHJcbiAgfSBlbHNlIGlmICgrZS50YXJnZXQudmFsdWUgPCBlLnRhcmdldC5taW4pIHtcclxuICAgIGUudGFyZ2V0LnZhbHVlID0gZS50YXJnZXQubWluO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGNoZWNrRm9ybSA9IChlKSA9PiB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNoZWNrTmFtZSgpO1xyXG4gIGNoZWNrQ29kZU51bSgpO1xyXG4gIGNoZWNrTW9udGhBbmRZZWFyKCk7XHJcbiAgY2hlY2tDdmMoKTtcclxuICB2YWxpZGF0aW9uU3RhdGUgPT09IDQgPyBzaG93Q29tcGxldGUoKSA6ICh2YWxpZGF0aW9uU3RhdGUgPSAwKTtcclxufTtcclxuXHJcbmNvbnN0IGRpc3BsYXlJbmZvID0gKGlucHV0LCBkaXNwbGF5RWwsIGRlZmF1bHRWYWx1ZSkgPT4ge1xyXG4gIGRpc3BsYXlFbC50ZXh0Q29udGVudCA9IGlucHV0LnZhbHVlO1xyXG4gIGlmIChpbnB1dC52YWx1ZSA9PT0gXCJcIikge1xyXG4gICAgZGlzcGxheUVsLnRleHRDb250ZW50ID0gZGVmYXVsdFZhbHVlO1xyXG4gIH1cclxufTtcclxuXHJcbm5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gIGRpc3BsYXlJbmZvKG5hbWVJbnB1dCwgbmFtZURpc3BsYXkpO1xyXG59KTtcclxuXHJcbm51bWJlcklucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgbnVtYmVySW5wdXQudmFsdWUgPSBudW1iZXJJbnB1dC52YWx1ZVxyXG4gICAgLnJlcGxhY2UoL1xccy9nLCBcIlwiKVxyXG4gICAgLnJlcGxhY2UoLyguezR9KSg/ISQpL2csIFwiJDEgXCIpO1xyXG5cclxuICBkaXNwbGF5SW5mbyhudW1iZXJJbnB1dCwgbnVtYmVyRGlzcGxheSwgXCIwMDAwIDAwMDAgMDAwMCAwMDAwXCIpO1xyXG59KTtcclxuXHJcbm1vbnRoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmb3JjZVR3b0RpZ2l0cyk7XHJcbm1vbnRoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmb3JjZVByb3BlclZhbHVlKTtcclxubW9udGhJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcclxuICBkaXNwbGF5SW5mbyhtb250aElucHV0LCBtb250aERpc3BsYXksIFwiMDBcIik7XHJcbn0pO1xyXG5cclxueWVhcklucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZm9yY2VUd29EaWdpdHMpO1xyXG55ZWFySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmb3JjZVByb3BlclZhbHVlKTtcclxueWVhcklucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4ge1xyXG4gIGRpc3BsYXlJbmZvKHllYXJJbnB1dCwgeWVhckRpc3BsYXksIFwiMDBcIik7XHJcbn0pO1xyXG5cclxuY3ZjSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmb3JjZVRocmVlRGlnaXRzKTtcclxuY3ZjSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmb3JjZVByb3BlclZhbHVlKTtcclxuY3ZjSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoKSA9PiB7XHJcbiAgZGlzcGxheUluZm8oY3ZjSW5wdXQsIGN2Y0Rpc3BsYXksIFwiMDAwXCIpO1xyXG59KTtcclxuXHJcbmZvcm1CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNoZWNrRm9ybSk7XHJcbiJdfQ==
